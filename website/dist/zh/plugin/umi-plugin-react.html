<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>umi-plugin-react | UmiJS</title>
    <meta name="description" content="🌋 可插拔的企业级 react 应用框架。">
    
    
    <link rel="preload" href="/assets/css/0.styles.e51ba91e.css" as="style"><link rel="preload" href="/assets/js/app.f1f3a504.js" as="script"><link rel="preload" href="/assets/js/54.5241fcb8.js" as="script"><link rel="preload" href="/assets/js/2.e8061a7b.js" as="script"><link rel="prefetch" href="/assets/js/10.d0999deb.js"><link rel="prefetch" href="/assets/js/11.41a70aae.js"><link rel="prefetch" href="/assets/js/12.c852398a.js"><link rel="prefetch" href="/assets/js/13.12810ec6.js"><link rel="prefetch" href="/assets/js/14.72e559f6.js"><link rel="prefetch" href="/assets/js/15.4ae085f5.js"><link rel="prefetch" href="/assets/js/16.274a7ee4.js"><link rel="prefetch" href="/assets/js/17.5742bcbf.js"><link rel="prefetch" href="/assets/js/18.636cb423.js"><link rel="prefetch" href="/assets/js/19.4554d571.js"><link rel="prefetch" href="/assets/js/20.a6343e64.js"><link rel="prefetch" href="/assets/js/21.81a66bd2.js"><link rel="prefetch" href="/assets/js/22.54732e48.js"><link rel="prefetch" href="/assets/js/23.8e01ab11.js"><link rel="prefetch" href="/assets/js/24.e24b9f96.js"><link rel="prefetch" href="/assets/js/25.b8ab9178.js"><link rel="prefetch" href="/assets/js/26.b16f4780.js"><link rel="prefetch" href="/assets/js/27.d873a625.js"><link rel="prefetch" href="/assets/js/28.9fd2cebd.js"><link rel="prefetch" href="/assets/js/29.4dab3ea0.js"><link rel="prefetch" href="/assets/js/3.1ef4404a.js"><link rel="prefetch" href="/assets/js/30.67cc5009.js"><link rel="prefetch" href="/assets/js/31.5ed73f17.js"><link rel="prefetch" href="/assets/js/32.1f14e5dd.js"><link rel="prefetch" href="/assets/js/33.a462a28b.js"><link rel="prefetch" href="/assets/js/34.9cbf3091.js"><link rel="prefetch" href="/assets/js/35.864f897f.js"><link rel="prefetch" href="/assets/js/36.9d52c6a5.js"><link rel="prefetch" href="/assets/js/37.c400585c.js"><link rel="prefetch" href="/assets/js/38.e92ba6a2.js"><link rel="prefetch" href="/assets/js/39.67e08701.js"><link rel="prefetch" href="/assets/js/4.917b607f.js"><link rel="prefetch" href="/assets/js/40.7bf9ba43.js"><link rel="prefetch" href="/assets/js/41.74daff44.js"><link rel="prefetch" href="/assets/js/42.e739a291.js"><link rel="prefetch" href="/assets/js/43.45a5fce4.js"><link rel="prefetch" href="/assets/js/44.700d5f25.js"><link rel="prefetch" href="/assets/js/45.71102ed3.js"><link rel="prefetch" href="/assets/js/46.67d9fc35.js"><link rel="prefetch" href="/assets/js/47.e5ca5d17.js"><link rel="prefetch" href="/assets/js/48.ceac321c.js"><link rel="prefetch" href="/assets/js/49.b2171711.js"><link rel="prefetch" href="/assets/js/5.e89d136a.js"><link rel="prefetch" href="/assets/js/50.5b11c3fd.js"><link rel="prefetch" href="/assets/js/51.cdf75c59.js"><link rel="prefetch" href="/assets/js/52.c5258431.js"><link rel="prefetch" href="/assets/js/53.95e4ffa9.js"><link rel="prefetch" href="/assets/js/55.083d58a3.js"><link rel="prefetch" href="/assets/js/6.0a235905.js"><link rel="prefetch" href="/assets/js/7.bc5ec7a2.js"><link rel="prefetch" href="/assets/js/8.8c2c97ac.js"><link rel="prefetch" href="/assets/js/9.dd106043.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e51ba91e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">UmiJS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/zh/config/" class="nav-link">配置</a></div><div class="nav-item"><a href="/zh/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/zh/plugin/" class="nav-link router-link-active">插件</a></div><div class="nav-item"><a href="https://v1.umijs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/umijs/umi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  发布日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin/umi-plugin-react.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/plugin/umi-plugin-react.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/umijs/umi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/zh/config/" class="nav-link">配置</a></div><div class="nav-item"><a href="/zh/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/zh/plugin/" class="nav-link router-link-active">插件</a></div><div class="nav-item"><a href="https://v1.umijs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/umijs/umi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  发布日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin/umi-plugin-react.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/plugin/umi-plugin-react.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/umijs/umi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>插件</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/plugin/" class="sidebar-link">插件</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>官方插件</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/plugin/umi-plugin-react.html" class="active sidebar-link">umi-plugin-react</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#配置项" class="sidebar-link">配置项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#dva" class="sidebar-link">dva</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#antd" class="sidebar-link">antd</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#routes" class="sidebar-link">routes</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#polyfills-已废弃" class="sidebar-link">polyfills (已废弃)</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#locale" class="sidebar-link">locale</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#library" class="sidebar-link">library</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#dynamicimport" class="sidebar-link">dynamicImport</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#dll" class="sidebar-link">dll</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#hardsource" class="sidebar-link">hardSource</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#pwa" class="sidebar-link">pwa</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#hd" class="sidebar-link">hd</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#fastclick" class="sidebar-link">fastClick</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#title" class="sidebar-link">title</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#chunks" class="sidebar-link">chunks</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#scripts" class="sidebar-link">scripts</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#headscripts" class="sidebar-link">headScripts</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#metas" class="sidebar-link">metas</a></li><li class="sidebar-sub-header"><a href="/zh/plugin/umi-plugin-react.html#links" class="sidebar-link">links</a></li></ul></li></ul></li><li><a href="/zh/plugin/umi-plugin-prerender.html" class="sidebar-link">@umijs/plugin-prerender</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>插件开发</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/plugin/develop.html" class="sidebar-link">插件开发</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="umi-plugin-react"><a href="#umi-plugin-react" aria-hidden="true" class="header-anchor">#</a> umi-plugin-react</h1> <p>这是官方封装的一个插件集，包含 18 个常用的进阶功能。</p> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> umi-plugin-react --dev
</code></pre></div><h2 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h2> <p>在 <code>.umirc.js</code> 里配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-plugin-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      dva<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        immer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      antd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      routes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token regex">/models\//</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      polyfills<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'ie9'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      locale<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      library<span class="token punctuation">:</span> <span class="token string">'react'</span><span class="token punctuation">,</span>
      dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackChunkName<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        loadingComponent<span class="token punctuation">:</span> <span class="token string">'./components/Loading.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      dll<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      pwa<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      hd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      fastClick<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      title<span class="token punctuation">:</span> <span class="token string">'default title'</span><span class="token punctuation">,</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">,</span> <span class="token string">'umi'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      scripts<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">'http://cdn/a.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">'&lt;%= PUBLIC_PATH %&gt;a.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> content<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">alert('a');</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      headScripts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      metas<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> charset<span class="token punctuation">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      links<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> rel<span class="token punctuation">:</span> <span class="token string">'stylesheet'</span><span class="token punctuation">,</span> href<span class="token punctuation">:</span> <span class="token string">'http://cdn/a.css'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="配置项"><a href="#配置项" aria-hidden="true" class="header-anchor">#</a> 配置项</h2> <p>所有功能默认关闭，有真值配置才会开启。</p> <h3 id="dva"><a href="#dva" aria-hidden="true" class="header-anchor">#</a> dva</h3> <ul><li>类型：<code>Object</code></li></ul> <p>基于 <a href="https://github.com/umijs/umi/tree/master/packages/umi-plugin-dva" target="_blank" rel="noopener noreferrer">umi-plugin-dva<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现，功能详见 <a href="/zh/guide/with-dva.html">和 dva 一起用</a>。</p> <p>配置项包含：</p> <ul><li><code>immer</code>，是否启用 <a href="https://github.com/dvajs/dva/tree/master/packages/dva-immer" target="_blank" rel="noopener noreferrer">dva-immer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>dynamicImport</code>，是否启用按需加载，配置项同 <a href="#dynamicImport">#dynamicImport</a>，并且如果在 <a href="#dynamicImport">#dynamicImport</a> 有配置，配置项会继承到 dva 中</li> <li><code>hmr</code>，是否启用 dva 的 hmr</li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>如果项目中有 dva 依赖，则优先使用项目中的依赖。</p></div> <h3 id="antd"><a href="#antd" aria-hidden="true" class="header-anchor">#</a> antd</h3> <ul><li>类型：<code>Boolean</code></li></ul> <p>启用后自动配置 <a href="https://github.com/ant-design/babel-plugin-import" target="_blank" rel="noopener noreferrer">babel-plugin-import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现 antd, antd-mobile 和 antd-pro 的按需编译，并且内置 antd, antd-mobile 依赖，无需手动在项目中安装。</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>如果项目中有 antd 或者 antd-mobile 依赖，则优先使用项目中的依赖。</p></div> <h3 id="routes"><a href="#routes" aria-hidden="true" class="header-anchor">#</a> routes</h3> <ul><li>类型：<code>Object</code></li></ul> <p>基于 <a href="https://github.com/umijs/umi/tree/master/packages/umi-plugin-routes" target="_blank" rel="noopener noreferrer">umi-plugin-routes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现，用于批量修改路由。</p> <p>配置项包含：</p> <ul><li><code>exclude</code>，值为 <code>Array(RegExp)</code>，用于忽略某些路由，比如使用 dva 后，通常需要忽略 models、components、services 等目录</li> <li><code>update</code>, 值为 <code>Function</code>，用于更新路由</li></ul> <h3 id="polyfills-已废弃"><a href="#polyfills-已废弃" aria-hidden="true" class="header-anchor">#</a> polyfills (已废弃)</h3> <ul><li>类型：<code>Array(String)</code></li></ul> <blockquote><p>请改用 <a href="https://umijs.org/zh/config/#targets" target="_blank" rel="noopener noreferrer">config.targets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>基于 <a href="https://github.com/umijs/umi/tree/master/packages/umi-plugin-polyfills" target="_blank" rel="noopener noreferrer">umi-plugin-polyfills<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现，用于加各种补丁。</p> <p>目前支持配置 <code>['ie9']</code>、<code>['ie10']</code> 或 <code>['ie11']</code>，实现一键兼容。</p> <h3 id="locale"><a href="#locale" aria-hidden="true" class="header-anchor">#</a> locale</h3> <ul><li>类型：<code>Object</code></li></ul> <p>基于 <a href="https://github.com/umijs/umi/tree/master/packages/umi-plugin-locale" target="_blank" rel="noopener noreferrer">umi-plugin-locale<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://github.com/yahoo/react-intl" target="_blank" rel="noopener noreferrer">react-intl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现，用于解决 i18n 问题。</p> <p>配置项包含：</p> <ul><li><code>default: 'zh-CN'</code>, // default zh-CN</li> <li><code>baseNavigator: true</code>, // default true, when it is true, will use <code>navigator.language</code> overwrite default</li> <li><code>antd: true</code>, // use antd, default is true</li></ul> <h3 id="library"><a href="#library" aria-hidden="true" class="header-anchor">#</a> library</h3> <ul><li>类型：<code>String</code></li></ul> <p>可能切换底层库为 preact 或 react。</p> <h3 id="dynamicimport"><a href="#dynamicimport" aria-hidden="true" class="header-anchor">#</a> dynamicImport</h3> <ul><li>类型：<code>Object</code></li></ul> <p>实现路由级的动态加载（code splitting），可按需指定哪一级的按需加载。</p> <p>配置项包含：</p> <ul><li><code>webpackChunkName</code>，是否通过 webpackChunkName 实现有意义的异步文件名</li> <li><code>loadingComponent</code>，指定加载时的组件路径</li> <li><code>level</code>，指定按需加载的路由等级</li></ul> <h3 id="dll"><a href="#dll" aria-hidden="true" class="header-anchor">#</a> dll</h3> <ul><li>类型：<code>Object</code></li></ul> <p>通过 webpack 的 dll 插件预打包一份 dll 文件来达到二次启动提速的目的。</p> <p>配置项包含：</p> <ul><li><code>include</code></li> <li><code>exclude</code></li></ul> <h3 id="hardsource"><a href="#hardsource" aria-hidden="true" class="header-anchor">#</a> hardSource</h3> <p>hardSource 已经不可用，请在配置文件中移除它。</p> <h3 id="pwa"><a href="#pwa" aria-hidden="true" class="header-anchor">#</a> pwa</h3> <ul><li>类型：<code>Object</code></li></ul> <p>开启 PWA 相关功能，包括：</p> <ul><li>生成 <code>manifest.json</code>，对于 WebManifest 中引用的 <code>icons</code> 图标，建议放在项目根目录 <code>public/</code> 文件夹下，最终会被直接拷贝到构建目录中</li> <li>在 <code>PRODUCTION</code> 模式下生成 Service Worker</li></ul> <p>配置项包含：</p> <ul><li><code>manifestOptions</code> 类型：<code>Object</code>，包含如下属性:
<ul><li><code>srcPath</code> manifest 的文件路径，类型：<code>String</code>，默认值为 <code>src/manifest.json</code>（如果 <code>src</code> 不存在，为项目根目录）</li></ul></li> <li><code>workboxPluginMode</code> Workbox 模式，类型：<code>String</code>，默认值为 <code>GenerateSW</code> 即生成全新 Service Worker ；也可选填 <code>InjectManifest</code> 即向已有 Service Worker 注入代码，适合需要配置复杂缓存规则的场景</li> <li><code>workboxOptions</code> Workbox <a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin#full_generatesw_config" target="_blank" rel="noopener noreferrer">配置对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，其中部分重要属性如下:
<ul><li><code>swSrc</code> 类型：<code>String</code>，默认值为 <code>src/service-worker.js</code>，只有选择了 <code>InjectManifest</code> 模式才需要配置</li> <li><code>swDest</code> 类型：<code>String</code>，最终输出的文件名，默认值为 <code>service-worker.js</code> 或者等于 <code>swSrc</code> 中的文件名</li> <li><code>importWorkboxFrom</code> 类型：<code>String</code>，默认从 Google CDN 加载 Workbox 代码，可选值 <code>'local'</code> 适合国内无法访问的环境</li></ul></li></ul> <p>更多关于 Workbox 的使用可以参考<a href="https://developers.google.com/web/tools/workbox/" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>一个完整示例如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .umirc.js or config/config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  pwa<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    manifestOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      srcPath<span class="token punctuation">:</span> <span class="token string">'path/to/manifest.webmanifest'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    workboxPluginMode<span class="token punctuation">:</span> <span class="token string">'InjectManifest'</span><span class="token punctuation">,</span>
    workboxOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      importWorkboxFrom<span class="token punctuation">:</span> <span class="token string">'local'</span><span class="token punctuation">,</span>
      swSrc<span class="token punctuation">:</span> <span class="token string">'path/to/service-worker.js'</span><span class="token punctuation">,</span>
      swDest<span class="token punctuation">:</span> <span class="token string">'my-dest-sw.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当 Service Worker 发生更新以及网络断开时，会触发相应的 <code>CustomEvent</code>。
例如当 Service Worker 完成更新时，通常应用会引导用户手动刷新页面，在组件中可以监听 <code>sw.updated</code> 事件：</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'sw.updated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 弹出提示，引导用户刷新页面</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>另外，当网络环境发生改变时，也可以给予用户显式反馈：</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'sw.offline'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 置灰某些组件</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hd"><a href="#hd" aria-hidden="true" class="header-anchor">#</a> hd</h3> <ul><li>类型：<code>Boolean</code></li></ul> <p>开启高清方案。</p> <h3 id="fastclick"><a href="#fastclick" aria-hidden="true" class="header-anchor">#</a> fastClick</h3> <ul><li>类型：<code>Boolean</code></li></ul> <p>启用 fastClick。</p> <h3 id="title"><a href="#title" aria-hidden="true" class="header-anchor">#</a> title</h3> <ul><li>类型：<code>String</code> 或者 <code>Object</code></li></ul> <p>开启 title 插件，设置 HTML title：</p> <p>配置项包含：</p> <ul><li><code>defaultTitle: '默认标题'</code>, // 必填，当配置项为 String 时直接配置项作为 defaultTitle</li> <li><code>format: '{parent}{separator}{current}'</code>, // default {parent}{separator}{current}, title format</li> <li><code>separator: ' - '</code>, // default ' - '</li> <li><code>useLocale: true</code>, // default false，是否使用locale做多语言支持。如果选<code>true</code>，则会通过配置的<code>title</code>属性去<code>locales/*.js</code>找对应文字</li></ul> <p>当 title 插件开启后你可以在 routes 配置或者 pages 下的页面组件中配置 title。</p> <p>比如使用配置式路由的时候如下配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .umirc.js or config/config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/testpage'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token string">'./testpage'</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'test page'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用约定式路由的时候则直接在页面组件中配置：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/**
 * title: test page
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">testpage</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>在约定式路由里，注释必须写在文件头，否则将不被识别</p></blockquote> <h4 id="自定义模板document-ejs"><a href="#自定义模板document-ejs" aria-hidden="true" class="header-anchor">#</a> 自定义模板document.ejs</h4> <p>如果你使用了自定的<code>src/pages/document.ejs</code>，你需要在里面加入<code>&lt;title&gt;&lt;%= context.title %&gt;&lt;/title&gt;</code>，以确保<code>title.defaultTitle</code>能正常被注入到生成的<code>index.html</code>里</p> <h3 id="chunks"><a href="#chunks" aria-hidden="true" class="header-anchor">#</a> chunks</h3> <ul><li>类型：<code>Array(String)</code></li></ul> <p>默认是 ['umi']，可修改，比如做了 vendors 依赖提取之后，会需要在 umi.js 之前加载 vendors.js</p> <p>比如如下配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .umirc.js or config/config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> webpack <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
          minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
          cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            vendor<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
              <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> resource <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token operator">/</span><span class="token punctuation">[</span>\\<span class="token regex">/]node_modules[\\/]/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              priority<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-plugin-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vendors'</span><span class="token punctuation">,</span> <span class="token string">'umi'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="scripts"><a href="#scripts" aria-hidden="true" class="header-anchor">#</a> scripts</h3> <ul><li>类型：<code>Array(Object)</code> 或者 <code>Array(String)</code> <span class="badge tip top" data-v-8b31a04a>1.8.0+</span></li></ul> <p>放在 <code>&lt;body&gt;</code> 里，在 umi.js 之后，可使用 &lt;%= PUBLIC_PATH %&gt; 指向 publicPath</p> <h3 id="headscripts"><a href="#headscripts" aria-hidden="true" class="header-anchor">#</a> headScripts</h3> <ul><li>类型：<code>Array(Object)</code> 或者 <code>Array(String)</code> <span class="badge tip top" data-v-8b31a04a>1.8.0+</span></li></ul> <p>放在 <code>&lt;head&gt;</code> 里，在 umi.js 之前，可使用 &lt;%= PUBLIC_PATH %&gt; 指向 publicPath</p> <h3 id="metas"><a href="#metas" aria-hidden="true" class="header-anchor">#</a> metas</h3> <ul><li>类型：<code>Array(Object)</code></li></ul> <h3 id="links"><a href="#links" aria-hidden="true" class="header-anchor">#</a> links</h3> <ul><li>类型：<code>Array(Object)</code></li></ul> <p>可使用 &lt;%= PUBLIC_PATH %&gt; 指向 publicPath</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/umijs/umi/edit/master/docs/zh/plugin/umi-plugin-react.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-8-10 4:23:43 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/zh/plugin/" class="prev router-link-active">
          插件
        </a></span> <span class="next"><a href="/zh/plugin/umi-plugin-prerender.html">
          @umijs/plugin-prerender
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.f1f3a504.js" defer></script><script src="/assets/js/54.5241fcb8.js" defer></script><script src="/assets/js/2.e8061a7b.js" defer></script>
  </body>
</html>
